<style>
    a:hover, a:active {
        text-decoration: none;
        background-color: white;
        color: black;
        outline: none;
    }

    .table > thead > tr > th, .table > tbody > tr > td {
        text-align: center;
    }

    .digg_pagination .page_info {
        text-align: left;
        width: auto;
        margin-left: -20px;
        margin-right: -20px;
    }

    .digg_pagination {
        background: transparent;
    }
</style>

<div class="panel panel-default">
  <ol class="breadcrumb" style="background: transparent;padding: 20px 0 0 20px;font-size: 1.2em;">
    <li class="active">移库管理</li>
    <li>
      <a href="/movement_lists" title="返回移库单列表">移库项列表</a>
    </li>
    <li class="active">
      库存操作源数据列表
    </li>
  </ol>
</div>

<div class="col-sm-12">
  <div class="digg_pagination">
    <div class="page_info">
      <%= page_entries_info @movement_sources %>
    </div>
    <%= will_paginate @movement_sources, :container => false %>
  </div>
</div>

<table class="table table-bordered table-striped">
  <thead>
  <tr>
    <th>NO.</th>
    <th>零件号</th>
    <th>唯一码</th>
    <th>数量</th>
    <th>FIFO</th>
    <th>创建时间</th>
    <th>源仓库</th>
    <th>源库位</th>
    <th>目的仓库</th>
    <th>目的库位</th>
    <th>员工号</th>
    <th>备注</th>
    <th>所属移库单</th>
    <th>状态</th>
    <!--<th></th>-->
  </tr>
  </thead>

  <tbody>
  <% @movement_sources.each_with_index do |movement, i| %>
      <tr>
        <td><%= @page_start+i+1 %></td>
        <td><%= movement.partNr if movement.partNr %></td>
        <td><%= movement.packageId if movement.packageId %></td>
        <td><%= movement.qty %></td>
        <td><%= movement.fifo.localtime if movement.fifo %> </td>
        <td><%= movement.created_at.localtime if movement.created_at %></td>
        <td><%= movement.fromWh if movement.fromWh %></td>
        <td><%= movement.fromPosition if movement.fromPosition %></td>
        <td><%= movement.toWh if movement.toWh %></td>
        <td><%= movement.toPosition if movement.toPosition %></td>
        <% if u=User.find_by_id(movement.employee_id) %>
            <td><%= u.nr %></td>
        <% else %>
            <td></td>
        <% end %>
        <td><%= movement.remarks if movement.remarks %> </td>
        <td><%= movement.movement_list_id %> </td>
        <td><%= MovementListState.display movement.movement_list.state.to_i %> </td>
      </tr>
  <% end %>
  </tbody>
</table>

<br>
<div class="digg_pagination">
  <%= will_paginate @movement_sources, :container => false %>
</div>


<script>
    $(function () {
        $(".datepicker").datetimepicker({
            lang: 'ch',
            format: 'Y-m-d H:i'
        });
    });
</script>