<h1>零件位置列表</h1>
<div>
  <form method="get" action="<%= send("search_#{@model.pluralize}_path") %>">
    <div>
      <span>零件编号：
        <input type="text" name="part_position[part_id]" value="<%= @part_id %>"/>
      </span>
      <span>库位编号：
        <input type="text" name="part_position[position_id]" value="<%= @position_id %>"/>
      </span>
      <span>默认源库位：
        <input type="text" name="part_position[from_position_id]" value="<%= @from_position_id %>"/>
      </span>
      <span> 默认源仓库：
        <%= select_tag('part_position[from_warehouse_id]', options_from_collection_for_select(Whouse.all, 'id', 'name', @from_warehouse_id), include_blank: true) %>
      </span>

      <input style="margin: 0" type="submit" value="查 找" class="btn btn-primary" name="search"/>
      <input style="margin: 0" type="submit" value="导出" class="btn btn-primary" name="download"/>
    </div>
  </form>
</div>

<div class="digg_pagination">
  <div class="page_info">
    <%= page_entries_info @part_positions %>
  </div>
  <%= will_paginate @part_positions, :container => false %>
</div>

<%= link_to '新建零件位置', send("new_#{@model}_path"), :class => 'btn btn-default' %>
<%= link_to '导入数据', import_part_positions_path, :class => 'btn btn-default' %>



<table class="table table-bordered table-striped table-hover">
  <thead>
  <tr>
    <th>编号</th>
    <th>零件号</th>
    <th>库位号</th>
    <th>仓库号</th>
    <th>安全库存</th>
    <th>默认源仓库</th>
    <th>默认源库位</th>
    <th colspan="3"></th>
  </tr>
  </thead>

  <tbody>
  <% @part_positions.each_with_index do |part_position, i| %>
      <tr>
        <td><%= i+@part_positions.offset+1 %></td>
        <td><%= part_position.part.blank? ? '' : part_position.part.id %></td>
        <td><%= part_position.position.blank? ? '' : part_position.position.detail %></td>
        <td><%= part_position.position.blank? ? '' : (part_position.position.whouse.blank? ? '' : part_position.position.whouse.name) %></td>
        <td><%= part_position.safe_stock %></td>
        <td><%= part_position.from_warehouse.blank? ? '' : part_position.from_warehouse.name %></td>
        <td><%= part_position.from_position.blank? ? '' : part_position.from_position.detail %></td>
        <td>
          <%= link_to '[详情]', part_position %>
          <%= link_to '[编辑]', edit_part_position_path(part_position) %>
          <%= link_to '[删除]', part_position, method: :delete, data: {confirm: '确定删除?'} %>
        </td>
      </tr>
  <% end %>
  </tbody>
</table>


