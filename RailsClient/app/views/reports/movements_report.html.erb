<div class="panel panel-warning">
  <div class="panel-heading">
    <h2>出入库报表</h2>
    入库与出库的统计报表.
  </div>
</div>
<div class="panel-body">
  <br/>
  <!--Form-->
  <form method="get" path="<%= reports_reports_path%>">
  <span>零件号：
              <input type="text" name="part_id" value="<%= @part_id %>"/>
            </span>
    <span class="label label-info">报表类型:</span>
    <%= select_tag(:type,options_for_select(MovementType.list,@type),include_blank: false)%>
    <span class="label label-info">仓库:</span>
    <%= select_tag(:whouse_id, options_for_select(Whouse.all.collect{|w| [w.name, w.id]}, @whouse_id), include_blank: false) %>
    <span class="label label-info">创建时间:</span>
    <input id="date-start" type="text" name="date_start" class="datepicker" value="<%= @date_start %>"/>
    ~ <input id="date-end" type="text" name="date_end" class="datepicker" value="<%= @date_end %>"/>
    <span class="label label-info">显示方式:</span>
    <%= select_tag :format, options_for_select([["Web", "html"],["Excel File(MS 07 or later)", "xlsx"]], "html") %>
    <input type="submit" value="汇总" class="btn btn-warning" name="commit" onclick="submitForm()"/>
    <input type="submit" value="详细" class="btn btn-warning" name="commit" onclick="submitForm()"/>
  </form>
</div>
<!--Form-->
<div class="alert alert-success" role="alert">
  <p><%= @title%></p>
</div>


<table class="table table-striped table-condensed table-hover">
  <thead>
  <tr>
    <th>No.</th>
    <th>唯一码</th>
    <th>零件号</th>
    <th>数量</th>
    <th>仓库</th>

  </tr>
  </thead>
  <tbody>
  <% @movements.each_with_index do |p, index| %>
      <tr>
        <td><%= index+1 %></td>
        <td>
          <% if @commit_value == "详细" %>
              <%= p.packageId %>
          <% else %>
              <%= %>
          <% end %>
        </td>
        <td><%= p.partNr %></td>
        <td><%= p.total_qty %></td>
        <td><%= p.wh_id %></td>

      </tr>
  <% end %>
  </tbody>
</table>

<% content_for :javascript_includes do %>
    <%= javascript_include_tag "bootstrap-select" %>
    <%= javascript_include_tag "treport" %>
<% end %>

<script>
    $(document).ready(function(){
        $(".datepicker").datetimepicker({
            lang: 'ch',
            format: 'Y-m-d H:i'
        });
        $('.selectpicker').selectpicker();
        $('.selectpicker').selectpicker('val', 'Mustard');
        $('.selectpicker').selectpicker('render');
    });
</script>